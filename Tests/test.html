<head>
  <1--base href="http://w.minimalist.yesco.org/foo/index.html" /> -->
</head>
<h1>Minimialist Browser</h1>

<p>
This is a test of the <i>minimalist</i> <tt>./w</tt> web-browser written in C. It is a meagre <b>&lt;1000 lines C-code</b> (comments, tests, and empty lines not counted).
</p>

<h2>History</h2>
<p>In the morning of August 4th, 2021, in the morning: it was a total 370 lines. <b>pre/code</b> added 10 lines, <b>word-wrap</b> 40, misc formatting improvements &mdash; 10 lines. I added 36 for handling <b>HTML entities</b>. Now, I didn't want to count pure comment lines &amp; nor empty lines; so changed my counting script; Adding <b>numbered entities</b>: Hex and deciaml; there are <b>345 lines</b> of <i>C</i>; Adding parsing of <b>attributes</b> added a whole lot: 70 lines. But then I did a general cleanup of most code, and got it down to 30ish lines! With simple table support, it's about 550 lines.
</p>

<h2>Individual Tests</h2>
<ul id='list'>
<li><a href='#entities'>HTML Entities</a></li>
<li><a href='#list'>This is a List</a></li>
<li><a href='#todo'>The TODO list at the end</a></li>
<li><a href='#nestedlists'>Nested Lists</a></li>
<li><a href='dl.html'>Definition Lists</a></li>
<li><a href='links.html'>Links test page</a></li>
<li><a href='links-many.html'>Links test page</a></li>
<li><a href='table.html'>Simle Table</a></li>
<li><a href='table-shortened.html'>Simle Table without end-tags</a></li>
<li><a href='table-complex.html'>Complex Table</a></li>
<li><a href='table-crazy.html'>Crazy Table</a></li>
<li><a href='table-crazy.html'>Crazy Table</a></li>
<li><a href='words.html'>Testing of word-wrap (with Unicode)</a></li>
<li><a href='unicode-pre.html'>Testing of width of characters</a></li>
<li><a href='color.html'>Testing of colors</a></li>
</ul>

<h2 id='entities'>HTML Entities</h2>

<P>As you saw above; it supports <b>named entities</b> (caveat inline without surrounded by space, see bug below). Did you know that the list of HTML entties is <b>2234</b> elements long! &amp; <tt> &amp;amp;</tt> &lt; <tt> &amp;lt;</tt>  &gt; <tt>&amp;gt;</tt> are just few examples.</p>

<p>It supports <b>numbered entities</b> on the form: This is decimal 'A': &#65; <tt> &amp;#4711;</tt>, and fullwidth 'ï¼¡': &#xff21; <tt> &amp;#xff21</tt>.</p>

<p><b>Links</b> are rendered <a href="http://google.com/">Google</a> but there is no navigation or paging.</p>

<p>
Below continues various plain simple html. CSS is <b>not</b> handled. But all other tags <i>should</i> be (Terminal bug: 'o' in should is overwritten and looks like 'p'). Can you mix: <b>bold <i>bold italics</i> bold</b> or <i>italics <b>italics bold</b> italics</i>.
</p>

<h2>Comments</h2>
<p>4see: <b>seebold1 seebold2</b>nospacesee3

<!-- Not see this: <error> this is ->a comment -->

see4
</p>

<h2 id='nestedlists'>Nested Lists</h2>
A list:
<ul>
<li>one</li>
<li>two</li>
<li>three</li>
<ul>
<li>aaaa</li>
<li>bbbb</li>
<li>cccc</li>
</ul>
<li>four</li><li>five</li><li>six</li>
</ul>
End of list.
<br><br>
List items without end tag:
<ul>
 <li>first
 <li>second

    <ul>
      <li>foo
      <li>bar
    </ul>
 <li>third <li>fourth
</ul>
After all.
<h2>pre</h2>

This is a small example of code:
<pre>
function fib(n) {
  if (n &lt; 1) return 0;
  if (n &lt; 2) return 1;
  return fib(n-1)+fib(n-2);
}
</pre>
Its implementation is recursive and expensive &mdash; <tt>O(2^n)</tt>.

<h1>Header 1</h1>
<h1>Header 1</h1>
<h2>Header 2</h2>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h5>Header 5</h5>
<h6>Header 6</h6>
<h6>Header 6</h6>
<p>Blah blahbalhbal albhablab ablahblabhalbla blabhalbahbla bahbl ablhaba</p>

<h1>DONE/Fixed bugs</h1>
<ul>
<li>A text with inline&amp;code with no spaces ( &amp; ) (&amp;).</li>
<li>&amp; tokens currently takes up as much space as the code is long, need to not count those characters... When to finish? ';' is not enough.</li>
<li>Some code are &amp-without the ";" or just a single & or illegal &foobar <tt> &amp;amp</tt> without the ';' &mdash; this is a parsing problem.</li>
<li>wordwrap used to count bytes, and break unicode chars - fixed</li>
<li>Not really a bug, but a matter of resilience of missing end tags. For example of the end li-tag is missing, indentation becomes messed up.</li>
<li>Handle larger font-sizes &lt;font size=+N&gt; and css="font-size:16px == double? = 4x4 font? Is there an ascii-art font in two lines?<br/>bubbleart,graceful:lower part of fire-font-s, <b>Calvin S</b> - a wire/boxgraphics font!, AMC 3 Liv1, bigfig! wire, Broadway KB !, Cyberlarge! Cybersmall! JS BLock Letters :  a 3 char high font in <a href="https://patorjk.com/software/taag/#p=testall&f=Graffiti&t=Jonas%20S%20Karlsson">ascii-art</a><br/>(4 high: rectangles, small, small slant, ascii new roman</li>
<li><b>images</b>? maybe this can help <a href="https://github.com/kristopolous/UniFig/blob/master/unifig.js">UniFig</a></li>
<li>show "line-line/lines" or page 1/4 at upper right corner 100% should mean can see end on screen (rows*100/lines)</li>
</ul>

<h1>Current Bugs</h1>

<h2>Terminal issues:</h2>
<ul>
<li>When resizing in Termux, background losses color at en dof line.</li>
<li>A test with <i>italic when ending with a 'd' like 3d=ddd</i> you can't see the last 'd' fully. Possible fix: if it's a space after, "move" the space inside the end-italics tag. Not easy the way we parse...</li>
<li>Text background/underline wraps with nl, it's "correct" but ugly</li>
</ul>

<h2 id="annoy">Annoyances</h2>
Not really bugs, but behaviour that could be fixed:
<ul>
<li><code>./w FILE</code> if open the same file as last, no need to add to history? Same with ALT-X?</li>
<li>link spanning line-end will underline indented spaces, haha, and <tt>will overflow</tt> solution is a delayed reformatting()? like recolor()?</li>
<li>in ^O only search, still move lines by actual line, not displayed...</li>
<li>Search cannot handle spaces, can't input! lol</li
</ul>

<li>Search will match numbers and data from hidden text, as well as link url and ESC ansi codes - how much do I care?</li>

<h2 id="todo">TODO:</h2>
<ul>

<li>Handle image tag, show alt. Image maps too.</li>

<li>Navigate to links by cursor movements.</li>

<li> &lt; ordered lists!</li>

<li>handle &lt;foo id="name"&gt; #name links, and be able to go to them; need to embed-hide it in the .ansi-file! (all id/name?) &lt;a name="foo"&gt; is <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate">deprecated</a>.</li>

</ul>

<h2>Bugs in ./w</h2>
<ul>

<li>After &lt; h2 &lt; if there is no text following the h2 takes 2 lines (with same background color)</li>

<li>Much improved, but...still word-wrap for unicode occasionally messes up some charact...? Tests/words.html</li>

<li>headers than span more than one line, don't break lines correctly, this messess up the output of wdisplay...

<li>URL#foo need to strip #foo when loading?</li>

<li>Need to decode attributes: yahoo.com encodes href... - https:%26%23x2F%3b%26%23x2F%3bnews.yahoo.com%26%23x2F%3b.ansi LOL</li>

<li>Wrap too early, and space missing, COLS=39:<br>aa b c d e f g h i j k l m n o p Q R s t u v w x y z</li>

<li>ab cd ef gh ij kl mn op qr st uv wx yz</li>

<li>when go to page, if cached it never updates</li>

<li>rewrite /FOO/../ => /FOO/ test here=<a href="https://lysator.liu.se/foreningen/../lokaler">lysator.liu.se/foreningen/../lokaler</a>.</li>

<li>Some things don't render, depending on URL like <a href="https://liu.se/biblioteket">liu.se/biblioteket</li> is ok, but not <a href="https://liu.se/biblioteket">https://liu.se/biblioteket</a>. ??? <a href="bbc.com">bbc.com</a> also gives trouble.</li>

<li>headlines full-width characters doesincorrect wrapping (no insert \n) when text not fit on one line? (even if we counting?)</li>

<li>searching doesn't find text in headers as they are fullwidth characters, could print it hidden with ^M so it'll match (but not visible) ^O would print it, but in either case: no hilite</li>

</ul>
