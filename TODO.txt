# ----------- TODOs ideas for ./w

- wless.x make it a (restrictable viewer of files, allow to run inside tmux, integration?)

- style not parsed correctly?
  https://en.m.wikipedia.org/wiki/Forth

- https://sverigesradio.se/artikel/kriminella-gang-varvar-attaaringar-med-swish-hotar-och-skrammer?fbclid=IwAR25sXIr3rWqKBBszV7oVOU8zbCELs5Ry_hzl0UP6RrNPUlYeyDJYl9halk doesn't find files after download???

- ./w type an URL after clicking seems to get out of sync, and then it sais "reload" when clicking "a" (I think maybe wrong page?)

- ask cursor pos
  $ printf "\e[6n" ; cat >fil
  "^[[36;1R"

- use scroll region FROMLINE-TOLINE:
  printf "\e[3;33r" to protect top/bottom!

- honor NOCACHE? CACHE directives? EXPIRE?

- TODO: how to only do RE-RENDER (w.x)?
  (twice in a row?, lol)

- IDEA: auto-hilite link middle on page when do CTRL-P CTRL-N (line movement?), how about many links on same line? tab? (only if buffer=0 or last is space? lol)

- what is the /Tests/b.html on local filesystem? (-> ./Tests.b.html
<li><a href="/Tests/b.html">bbbbbbbbbbbbbbbbbb</a></li>

- perl whi2html generates E0 F6 F5 at end??? (generated by <br>!!!)
@5:^M<F5><E0>2021-08-18<F5>
@29138:^M06:46 :A:{et example.com}etexample<F6><F5>

- URL shortcut keys increased if it spans several lines!

- <br/> not recognized!

- when URL is q=TEXT extract and "put" in command line? possibley with search prefix "PAGE/"

- extract and log offset position in documetn of where viewed...
- ^U view source, extract and goto offset position (as per hidden)
- ^S step to next match (reverse?)
- ^O search and narrow for tags (currently not in text. Add hidden? <table> <h1> <h2> etc...

- w.x always log time it took for each file... this to find out extremes!

- at 100x100 scrolling is slow. less -r is fast scrolling down, but struggle upwards! I'm guessing it prints line at end and scrolls, but upwards it redraws. Curiously, if you scroll slowly upwards it's fine. Fast down, ok, fast up, no ok.
= Reading file each time from beginning is "stupid" cache, at least offset[lineno] need darray! or just read once for all (read twice first time, or only as when scrolls?).

???? Research: how much is slowdown because of "reading" 100x100==10 000 chars on screen, maybe 3x with formatting, read all, printf all? same speed as getc?
=== 300K ansi takes 8s to display on small screen, 11s on 97x109, this is captured output from loop 1..300 of wdisplay for each line full screen from top to bottom
???? copy runeberg.org.ANSI x 10 and browse with scroll pages: it gets progressive slower at about 1/3 of the file. 8000 pages, and 800Kbyte!

- when going back/forward in history skip several sequences of same URLs? (actully, they may have different positions/top?)  (or don't add?)
- reload shouldn't (?) add to history?

- show welcom splash screen at startup instead of blank

- validate URL before calling wget

- indicate that a cashed version is shown "days old" (if too old reload autoamtically? Still show old first, then reload in background)

- generlize .wnetdown to contain message? maybe just general error at loading from external program?

- not give loading error on mailto: ?

- runeberg.org using iso-8850-1 latin-1? need translation (see js)

- optimized the nlines, no need count all bytes every time?

- Start rendering as soon as file loads?

- share/open in system browser
- on alternative URIs do:
  termux-open "mailto:foo@bar.com?cc=foo@bar&subject=headline&body=big+fishes"
- how about alternative types? pdf? images? can detect without loading down? from URL (file endings? enctype?)

- URL completion? log/extract every URL:
  unix> cut -d\  -f3 .whistory  | sort | uniq -c | sort -rn | grep " Te"    !!!

- Bracketed Paste Mode
When bracketed paste mode is set, pasted text is bracketed with control
sequences so that the program can differentiate pasted text from typed-
in text.  When bracketed paste mode is set, the program will receive:
   ESC [ 2 0 0 ~ ,
followed by the pasted text, followed by
   ESC [ 2 0 1 ~ .
- Any-event tracking
Any-event mode is the same as button-event mode, except that all motion
events are reported, even if no mouse button is down.  It is enabled by
specifying 1003 to DECSET.


- mouse scroll !
- mouse click click
- mouse menu
- https://invisible-island.net/xterm/ctlseqs/ctlseqs.html#h2-Mouse-Tracking
- 
tmux: - https://unix.stackexchange.com/questions/172566/screen-xterm-how-to-select-text-with-the-mouse-in-one-only-pane-when-window-i


- use bold unicode for bold - https://unicode-table.com/en/blocks/mathematical-alphanumeric-symbols/ but NO bold numbers :-(

- allow font serif/monospace/normal bu



- .ANSI: change the #= out-of-band data, cache till next newline, output after:
    <OFFET>#=W ...#=LINK <URL><clearend><bgcolor><fgcolor>TEXT TEXT TEXT(\n)
https://m.facebook.com/groups/GNUEmacsUsers/?notif_t=group_r2j_approved&notif_id=1629670864950883&ref=bookmarks

 
- .ANSI: add last lines #=LINES 4711
- .ANSI: add first "#"\r line with 80 chars, to later be overwritten with info #=LINES 4711 (if file is seekable!)


- when viewing URL-info (^Q) show bookmarks, and last visits (3 minutes ago, 7 hours ago, ...)

- wbookmarks: URL
- wbookmarks: SEARCH
- whistory: URL
- whistory: SEARCH
- whistory: 
  searching should generate result files and be part of history, using URI scheme like whistory:<url> wbookmarks:<url> wbookmarks:<foo>+<bar>

-  need <td align=right>... for that display


- use field format for log files? keep fiexed fields?
